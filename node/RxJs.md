---
typora-copy-images-to: media
typora-root-url: media
---

# 函数响应式编程

一个简单的RxJS例 

## 函数式编程

### 什么是函数式编程

**函数式编程就是⾮常强调使⽤函数来解决问题的⼀种编程⽅式。**

### 函数式编程对函数的要求

* 声明式（Declarative）
* 纯函数（Pure	Function）
* 数据不可变性（Immutability）

### JavaScript到底算不算函数式编程语⾔呢

从语⾔⾓度讲，JavaScript当然不算⼀个纯粹意义上的函数式编程语⾔，但是，JavaScript中的**函数有第⼀公民的⾝份**，因为函数本⾝就是⼀个对象，可以被赋值给⼀个变量，可以作为参数传递，由此可以很⽅便地应⽤函数式编程的许多思想。



我们把函数式编程看作⼀种编程思想，即使语⾔本⾝不⽀持⼀些特性，我们依然可以应⽤这样的编程思想，⽤于提⾼代码的质量。所以，JavaScript并不是纯粹的函数式编程语⾔，但是，通过应⽤⼀些编程规范，再借助⼀点⼯具的帮助，我们完全可以⽤JavaScript写出函数式的代码，



## 命令式和声明式编程

和声明式相对应的编程⽅式叫做命令式编程（Imperative  Programming），命令式编程也是最常见的⼀种编程⽅式。

### 命令是的函数式编程

```
// 命令式编程的例⼦，我们要实现这个功能，将每个数组中每个元素的数值乘以2。
function double(arr) {
  let res = [];
  for (let i = 0; i < arr.length; i++) {
    res.push(arr[i] * 2);
  }
  return res;
}

//为数组的每个元素加一
function addOne(arr) {
  let res = [];
  for (let i = 0; i < arr.length; i++) {
    res.push(arr[i] + 1);
  }
  return res;
}

let arr = [1, 2, 3];
console.log(double(arr));
console.log(addOne(arr));
/*
* 上面的代码重复使用map函数实现系统的功能
* */
```

### 声明式编程

```
/*
*
* 这就是声明式编程，因为在double函数中，代码实际上是这样的种解读：把每个数组映射（map）为每个数组，每个对应的元素都乘以2。
* */
let double2 = arr => {
  return arr.max(x => x * 2);
};
let addOne2 = arr => {
  return arr.max(x => x + 1);
}

/*
* 简写为lambda表达式
* */
let double3 = arr => arr.map(x => x * 2);
let addOne4 = arr => arr.map(x => x + 1);
```

## 纯函数

### 纯函数

简单来说，一个函数的返回结果只依赖于它的参数，并且在执行过程里面没有副作用，我们就把这个函数叫做纯函数。这么说肯定比较抽象，我们把它掰开来看： 

* 变量都只在函数作用域内获取, 作为的**函数的参数**传入
* 不会产生**副作用(side effects)**, 不会改变被传入的数据或者其他数据
* **相同的输入保证相同的输出(same input -> same ouput)**

### 不纯的函数

和纯函数相反的就是“不纯函数”（Impure	Function），⼀个函数之所以不纯，可能做了下⾯这些事情：

1. 改变全局变量的值。
2. 改变输⼊参数引⽤的对象，就像上⾯不是纯函数的arrayPush实现。
3. 读取⽤户输⼊，⽐如调⽤了alert或者confirm函数。
4. 抛出⼀个异常。
5. ⽹络输⼊/输出操作，⽐如通过AJAX调⽤⼀个服务器的API。
6. 操作浏览器的DOM。

## 数据不可变

![1549468951856](/1549468951856.png)

在JavaScript社区已经出现⼀些辅助⼯具来实现Immutable特性，⽐如Immutable.js这样的库，不过，即使没有这些⼯具的帮助，程序员也只需要⼀点纪律感，就能保持代码中的数据不可变。











## 为什么函数式编程最近才崛起





## 函数式编程和面向对象编程的比较

![1549469106238](/1549469106238.png)

## 响应式编程

响应式编程是一种**通过异步和数据流来构建事务关系的编程模型**。这里每个词都很重要，“事务的关系”是响应式编程的核心理念，“数据流”和“异步”是实现这个核心理念的关键 



## Reactiv Extension

![1549469386880](/1549469386880.png)

![1549469397586](/1549469397586.png)

## RxJS是否是函数响应式编程

![1549469596532](/1549469596532.png)

![1549469616453](/1549469616453.png)

## 函数响应式编程的优势

·数据流抽象了很多现实问题。
·擅长处理异步操作。
·把复杂问题分解成简单问题的组合。

![1549469673930](/1549469673930.png)

# RxJS入门

## RxJS的版本和运行环境

如果使⽤npm管理软件项⽬，导⼊RxJS直接通过npm	install命令就可以完成，在项⽬代码⽬录下运⾏下⾯的命令：

```
npm install rxjs
```







## Observable和Observer

![1549470174142](/1549470174142.png)

### 观察者模式

观察者模式要解决的问题，就是**在⼀个持续产⽣事件的系统中，如何分割功能，让不同模块只需要处理⼀部分逻辑，这种分⽽治之的思想是基本的系统设计概念**，当然，“分”很容易，关键是如何“治”。

观察者模式对“治”这个问题提的解决⽅法是这样，将逻辑分为**发布者（Publisher）和观察者（Observer**），其中发布者只管负责产⽣事件，它会通知所有注册挂上号的观察者，⽽不关⼼这些观察者如何处理这些事件，相对的，观察者可以被注册上某个发布者，只管接收到事件之后就处理，⽽不关⼼这些数据是如何产⽣的。







### 迭代器模式
### 创造Observable
### 跨越时间的Observable
### 永无止境的Observable
### Observable的完结
### Observable的出错处理
### Observer的简单形式
## 退订Observable
## Hot Observable和Cold Observable
## 操作符简介
## 弹珠图
































































